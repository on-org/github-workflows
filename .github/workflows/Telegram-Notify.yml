name: Send Telegram Notification

on:
  workflow_call:
    inputs:
      enabled:
        type: boolean
        required: false
        default: true  

jobs:
  notify:
    if: ${{ inputs.enabled }}
    runs-on: ci-server
    steps:
      -
        name: Telegram Notify Success
        uses: appleboy/telegram-action@master
        if: ${{ success() }}
        with:
          to: ${{ secrets.TELEGRAM_TO }}
          token: ${{ secrets.TELEGRAM_TOKEN }}
          message: |
            â„¹ï¸ * ONLINESIM MIRROR UPDATED *
            ğŸ†š *Version: ${{  github.ref_name }}*
            âœ… *The deploy has been completed.*
            ğŸ§‘â€ğŸ’» Developer: *${{github.actor}}*
            ğŸ’¬ Commit: [${{ github.event.head_commit.id }}](https://github.com/${{github.repository}})/commit/${{ github.event.head_commit.id }})
            ğŸ”— [GITHUB](https://github.com/${{github.repository}})
          format: markdown
          disable_web_page_preview: "True"
      - 
        name: Telegram Notify Failure
        uses: appleboy/telegram-action@master
        if: ${{ failure() }}
        with:
          to: ${{ secrets.TELEGRAM_TO }}
          token: ${{ secrets.TELEGRAM_TOKEN }}
          message: |
            âŒ * ONLINESIM MIRROR FAILED *
            ğŸ§‘â€ğŸ’» Developer: *${{github.actor}}*
            ğŸ”— [GITHUB](https://github.com/${{github.repository}})
          format: markdown
          disable_web_page_preview: "True"